From: Laurent Fousse <laurent@komite.net>
Date: Sat, 28 Apr 2012 13:10:20 -0700
Subject: Apply upstream patch06, fixing an incorrect format used in
 MPFR_LOG_VAR.

---
 PATCHES         |    1 +
 VERSION         |    2 +-
 src/mpfr-impl.h |    2 +-
 src/mpfr.h      |    2 +-
 src/version.c   |    2 +-
 5 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/PATCHES b/PATCHES
index 098a20f..667f278 100644
--- a/PATCHES
+++ b/PATCHES
@@ -1,3 +1,4 @@
+logging-varfmt
 logging-freeze
 gmp41compat
 vasprintf
diff --git a/VERSION b/VERSION
index 747f9b9..ea7c69d 100644
--- a/VERSION
+++ b/VERSION
@@ -1 +1 @@
-3.1.0-p5
+3.1.0-p6
diff --git a/src/mpfr-impl.h b/src/mpfr-impl.h
index 088f7fa..a97f8db 100644
--- a/src/mpfr-impl.h
+++ b/src/mpfr-impl.h
@@ -1592,7 +1592,7 @@ __MPFR_DECLSPEC extern mpfr_prec_t mpfr_log_prec;
   do                                                                    \
     if ((MPFR_LOG_INTERNAL_F & mpfr_log_type) &&                        \
         (mpfr_log_current <= mpfr_log_level))                           \
-      LOG_PRINT ("%s.%d:%s[%#Pu]=%.*Rf\n", __func__, __LINE__,          \
+      LOG_PRINT ("%s.%d:%s[%#Pu]=%.*Rg\n", __func__, __LINE__,          \
                  #x, mpfr_get_prec (x), mpfr_log_prec, x);              \
   while (0)
 
diff --git a/src/mpfr.h b/src/mpfr.h
index 86ad1d8..fecb36d 100644
--- a/src/mpfr.h
+++ b/src/mpfr.h
@@ -27,7 +27,7 @@ http://www.gnu.org/licenses/ or write to the Free Software Foundation, Inc.,
 #define MPFR_VERSION_MAJOR 3
 #define MPFR_VERSION_MINOR 1
 #define MPFR_VERSION_PATCHLEVEL 0
-#define MPFR_VERSION_STRING "3.1.0-p5"
+#define MPFR_VERSION_STRING "3.1.0-p6"
 
 /* Macros dealing with MPFR VERSION */
 #define MPFR_VERSION_NUM(a,b,c) (((a) << 16L) | ((b) << 8) | (c))
diff --git a/src/version.c b/src/version.c
index b3e6abd..b44ceb1 100644
--- a/src/version.c
+++ b/src/version.c
@@ -25,5 +25,5 @@ http://www.gnu.org/licenses/ or write to the Free Software Foundation, Inc.,
 const char *
 mpfr_get_version (void)
 {
-  return "3.1.0-p5";
+  return "3.1.0-p6";
 }
